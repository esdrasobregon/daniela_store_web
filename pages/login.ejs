<!DOCTYPE html>
<html>

<head>
    <%- include('./../shared/parsials/head')%>
        <title>
            <%= keys.key.webSiteName +" "+ keys.pagesNames.aloginText%>
    </title>
</head>

<body style=" background-color: #e3f2fd;">
                <!--header-->
                <%- include('./../shared/header')%>
                    <!--end header-->
                    <div class="container" style="margin-bottom: 50px; margin-top: 50px;">
                        <div class="overflow-auto p-3 mb-3 mb-md-0 mr-md-3 bg-light"
                            style="max-width: 100%; max-height: 450px;">
                            <div class="card border-success mb-10" style="margin-top: 20px">

                                <div class="card" style="margin: 10px;">
                                    <h3 class="text-info" style="margin: 5px;">Login</h3>
                                </div>
                                <div id="container-add-product-form" class="row border border-light">
                                    <div class="col-sm w-50 p-3">
                                        <div class="form-group" style="margin: 5px">
                                            <form id="login-form" class="login">
                                                <div class="form-group">
                                                    <input type="email" class="form-control" , id="userEmail"
                                                        name="userEmail" placeholder="Email" maxlength="50"
                                                        minlength="15" required>
                                                </div>
                                                <div class="form-group">
                                                    <input type="password" class="form-control" name="userPassword"
                                                        placeholder="Password" maxlength="25" minlength="8" required>
                                                </div>


                                                <div class="form-group">
                                                    <button type="submit"
                                                        class="btn btn-outline-success">Submit</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="col-sm w-50 p-3">
                                        <div class="overflow-auto p-3 mb-3 mb-md-0 mr-md-3 bg-light"
                                            style="max-width: 100%; max-height: 350px;">
                                            <img class="img-fluid" alt="Responsive image" id="imageFirebase"
                                                src="./../shared/images/login.png" />
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>
                    <!--header-->
                    <%- include('./../shared/footer')%>
                        <!--end header-->
                        <script src="./..//shared/customFormControllers.js"></script>
                        <script src="./..//shared/commonFuctions.js"></script>
                        <script src="./../shared/pleaseWait.js"></script>
                        <script src="./../js/ajax/user.js"></script>
                        <script>
                            loginForm = document.getElementById("login-form");
                            loginForm.addEventListener('submit', async (e) => {
                                e.preventDefault();
                                validateLoginForm();
                            });

                            /**
                             * this function validates the login form 
                             * info
                            */
                            async function validateLoginForm() {
                                var data = {
                                    userEmail: loginForm.userEmail.value.replace(/\s/g, ""),
                                    userPassword: loginForm.userPassword.value.replace(/\s/g, ""),
                                    case: "getUser"
                                };

                                if (isNotValid(data.userEmail)) {
                                    alert("You can't type this characters")
                                } else {
                                    if (isNotValid(data.userPassword)) {
                                        alert("You can't type this characters")
                                    } else {
                                        if ((data.userPassword.length > 8 && data.userPassword.length < 22)
                                            && (data.userEmail.length > 8 && data.userEmail.length < 40)) {
                                            showPleaseWait();
                                            var result = await loginCall(data);

                                            loginForm.reset();
                                            hidePleaseWait();
                                            result == null
                                                ? console.log(result)
                                                : alert("you are know in");
                                        } else {
                                            alert('Error in email or password')
                                        }

                                    }
                                }
                            }
                        </script>
                        <script src="./../js/commonFunctions.js"></script>

                        </body>

</html>